##
## EPITECH PROJECT, 2019
## makefile
## File description:
## makefile
##

## ========================================================================== ##
PATH_SOURCE			=	src/
SOURCE				=	usage.c						\
						create_window.c				\
						create_button.c				\
						create_element.c			\
						leave_state_if_error.c		\
						main.c						\
						create_music.c				\

## ========================================================================== ##
PATH_MAIN_MENU		=	src/main_menu/
MAIN_MENU			=	main_menu.c					\
						events_main_menu.c			\
						draw_main_menu.c			\
						ui_main_menu.c				\
						bouttons_main_menu.c		\
						destroy_main_menu.c

## ========================================================================== ##
PATH_SETTINGS_MENU	=	src/settings_menu/
SETTINGS_MENU		=	settings_menu.c				\
						draw_settings_menu.c		\
						init_button_settings_menu.c	\
						init_ui_settings_menu.c		\
						events_settings_menu.c		\
						destroy_settings_menu.c		\
						mouse_position_button_music.c

## ========================================================================== ##
PATH_PREGAME		=	src/in_game/pregame/
PREGAME				=	pregame.c					\
						draw_pregame.c				\
						events_pregame.c			\
						ui_pregame.c				\
						buttons_pregame.c			\
						destroy_pregame.c			\

## ========================================================================== ##
PATH_INTRO			=	src/in_game/intro/
INTRO				=	intro.c						\
						init_intro.c

## ========================================================================== ##
PATH_LOADING		=	src/in_game/loading/
LOADING				=	loading.c					\
						init_load_text.c			\
						set_and_draw_load.c

## ========================================================================== ##
PATH_GAME			=	src/in_game/in_game/
GAME				=	in_game.c					\
						draw_in_game.c				\
						create_character.c			\
						init_in_game_scene.c		\
						init_common_to_scenes.c		\
						destroy_in_game.c			\

## ========================================================================== ##
PATH_INIT_UI_GAME	=	src/in_game/in_game/init_ui_in_game/
INIT_UI_GAME		=	init_outside_ui.c			\
						init_ui_tavern.c			\
						init_ui_seller.c			\
						init_ui_cave.c				\
						init_ui_dungeon.c			\
						init_inventory.c			\
						init_in_game_text.c			\
						init_ui_arena.c				\
						init_inventory_text.c

## ========================================================================== ##
PATH_INIT_PNJ	=	src/in_game/in_game/init_pnj/
INIT_PNJ		=	init_outside_pnj.c			\
					init_tavern_pnj.c			\
					init_seller_pnj.c			\
					init_cave_pnj.c				\
					init_arena_pnj.c

## ========================================================================== ##
PATH_DRAW_IN_GAME	=	src/in_game/in_game/draw_in_game/
DRAW_IN_GAME		=	draw_outside.c				\
						draw_tavern.c				\
						draw_seller.c				\
						draw_cave.c					\
						draw_dungeon.c				\
						draw_inventory.c			\
						draw_arena.c				\
						draw_time.c 				\
						draw_night.c 				\

## ========================================================================== ##
PATH_GAME_EVENT		=	src/in_game/in_game/event/
GAME_EVENT			=	game_event.c					\
						event_keyboard.c				\
						event_move.c					\
						event_rect.c					\
						outside_events.c				\
						tavern_events.c					\
						seller_events.c					\
						cave_events.c					\
						dungeon_events.c				\
						inventory_events.c				\
						choose_equipment.c				\
						pnj_event.c						\
						arena_events.c					\
						shield_movement.c 				\
						set_pnj_dialog.c				\

## ========================================================================== ##
PATH_PAUSE			=	src/in_game/pause_menu/
PAUSE				=	pause_menu.c				\
						draw_pause_menu.c			\
						events_pause_menu.c			\
						ui_pause_menu.c				\
						buttons_pause_menu.c		\
						destroy_pause_menu.c

## ========================================================================== ##
PATH_END_GAME		=	src/in_game/end_game/
END_GAME			=	end_game.c					\
						draw_end_game.c				\
						init_end_game.c				\
						event_end_game.c			\
						destroy_end_game.c			\
## ========================================================================== ##
PATH_HITBOX			=	src/in_game/hitbox/
HITBOX				=	game_hitbox.c				\
						hitbox_effect.c				\
						hitbox_skin.c				\
						hitbox_color.c				\
						hitbox_read_image.c			\
						hitbox_pnj.c

## ========================================================================== ##
PATH_SCENE			=	src/in_game/hitbox/scene/
SCENE				=	hitbox_scene.c					\
						scene_exit.c					\
						scene_dungeon.c					\
						scene_arena.c					\
						scene_exit_arena.c				\
						scene_restore.c					\
						scene_handling.c

## ========================================================================== ##
PATH_FRAMEBUFFER	=	src/framebuffer/
FRAMEBUFFER			=	rpg_framebuffer.c				\
						framebuffer_update.c			\
						framebuffer_thread.c			\
						framebuffer_calculate.c

## ========================================================================== ##
PATH_SHAPES			=	src/framebuffer/shapes/
SHAPES				=	shape_square.c					\
						shape_drop.c					\
						shape_halo.c

## ========================================================================== ##
PATH_BUFFER		=		src/framebuffer/buffer/
BUFFER			=		framebuffer_buffer.c			\
						buffer_restore.c				\
						buffer_pixel.c

## ========================================================================== ##
PATH_RAIN		=		src/framebuffer/rain/
RAIN			=		framebuffer_rain.c				\
						rain_born.c						\
						rain_transition.c				\
						rain_splash.c					\
						rain_restart.c

## ========================================================================== ##
PATH_DARK		=		src/framebuffer/dark/
DARK			=		framebuffer_dark.c				\
						dark_born.c						\
						dark_position.c					\
						dark_detected.c					\
						dark_random.c

## ========================================================================== ##
PATH_BATTLE		=		src/in_game/in_game/battle/
BATTLE			=		game_battle.c					\
						battle_shot.c					\
						battle_hitbox.c					\
						battle_life.c					\
						battle_end.c					\
						shield_battle.c 				\

## ========================================================================== ##
PATH_ARROW		=		src/in_game/in_game/battle/arrow/
ARROW			=		battle_arrow.c					\
						arrow_send.c					\
						arrow_hit.c

## ========================================================================== ##
PATH_ENEMY		=		src/in_game/in_game/battle/enemy/
ENEMY			=		battle_enemy.c					\
						enemy_animate.c					\
						enemy_dodge.c					\
						enemy_move.c					\
						enemy_extremity.c

## ========================================================================== ##
PATH_CUT		=		src/framebuffer/cut/
CUT				=		framebuffer_cut.c				\
						cut_wait.c						\
						cut_enter.c						\
						cut_out.c						\
						cut_out_second.c

INC_PATH=include

SRC	=	$(addprefix $(PATH_SOURCE), $(SOURCE))						\
		$(addprefix $(PATH_MAIN_MENU), $(MAIN_MENU))				\
		$(addprefix $(PATH_SETTINGS_MENU), $(SETTINGS_MENU))		\
		$(addprefix $(PATH_GAME), $(GAME))							\
		$(addprefix $(PATH_INIT_UI_GAME), $(INIT_UI_GAME))			\
		$(addprefix $(PATH_INIT_PNJ), $(INIT_PNJ))					\
		$(addprefix $(PATH_DRAW_IN_GAME), $(DRAW_IN_GAME))			\
		$(addprefix $(PATH_GAME_EVENT), $(GAME_EVENT))				\
		$(addprefix $(PATH_PAUSE), $(PAUSE))						\
		$(addprefix $(PATH_HITBOX), $(HITBOX))						\
		$(addprefix $(PATH_SCENE), $(SCENE))						\
		$(addprefix $(PATH_FRAMEBUFFER), $(FRAMEBUFFER))			\
		$(addprefix $(PATH_BUFFER), $(BUFFER))						\
		$(addprefix $(PATH_SHAPES), $(SHAPES))						\
		$(addprefix $(PATH_RAIN), $(RAIN))							\
		$(addprefix $(PATH_DARK), $(DARK))							\
		$(addprefix $(PATH_BATTLE), $(BATTLE))						\
		$(addprefix $(PATH_ARROW), $(ARROW))						\
		$(addprefix $(PATH_ENEMY), $(ENEMY))						\
		$(addprefix $(PATH_PREGAME), $(PREGAME))					\
		$(addprefix $(PATH_CUT), $(CUT))							\
		$(addprefix $(PATH_INTRO), $(INTRO))						\
		$(addprefix $(PATH_END_GAME), $(END_GAME))					\
		$(addprefix $(PATH_LOADING), $(LOADING))

NAME	=		my_rpg

OBJ		=		$(SRC:.c=.o)

CFLAGS	=		-Wall -Werror -I. -I$(INC_PATH)

LIBS	=		-L ./lib/my -lmy -L ./lib/basics -lbasics

OFLAGS	=		-O2

LDFLAGS	= 	-lcsfml-graphics \
			-lcsfml-system \
			-lcsfml-window \
			-lcsfml-audio \
			-lm

$(NAME):	$(OBJ)
		@$(MAKE)	-s -C	lib/my
		@$(MAKE)	-s -C	lib/basics
		@gcc -o $(NAME) $(OBJ) $(LDFLAGS) $(LIBS) $(CFLAGS) $(OGLAGS)
		@echo -e "\n\033[01;38;5;10mCompiling : Done\033[0;0m"

all:	$(NAME)

.PHONY:	clean

clean:
		@rm -f $(OBJ)
		@$(MAKE)	-s	-C	lib/my fclean
		@$(MAKE)	-s	-C	lib/basics fclean

fclean:	clean
		@echo "###############################"
		@echo "#Removing lib and vgcore files#"
		@echo "###############################"
		@rm -f $(NAME)
		@rm -f vgcore*

re: fclean all

debug:
	@$(MAKE)	-s	-C	lib/my
	@$(MAKE)	-s	-C	lib/basics
	@clang -o $(NAME) $(SRC) $(LDFLAGS) $(LIBS) $(CFLAGS) $(DEBUG) -g
	@echo "Valgrind compilation: Done"